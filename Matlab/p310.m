function p310
%地震预报的matlab实例分析
%不同中间层神经元个数对实验结果的影响
p=[0 0 0.62 0 0 0 0;0.3915 0.4741 0.77 0.5 1 1 0.3158;
    0.2835 0.5402 0.68 0 1 1 0.3158;0.6210 1.000 0.63 1 1 1 1.000;
    0.4185 0.4183 0.67 0.5 1 1 0.7368;0.2610 0.4948 0.71 0 1 1 0.2632;
    0.9990 0.0383 0.75 0.5 1 1 0.9474;0.5805 0.4925 0.71 0 0 0 0.3684;
    0.0810 0.0692 0.76 0 0 0 0.0526;0.3915 0.1230 0.98 0.5 0 0 0.8974]';
t=[0 0.5313 0.5938 0.9375 0.4375 0.5000 1.0000 0.3570 0.3215 0.6563];
p_test=[0.0270 0.0742 0.62 0 0 0 0.2105;0.1755 0.3667 0.77 0 0.5 1 0.7368;
    0.4320 0.3790 0.68 0.5 0 1 0.2632;0.4995 0.4347 0.63 0 0 1 0.6842;
    0.6885 0.5842 0.67 0.5 0.5 1 0.4211;0.5400 0.8038 0.71 0.5 0.5 1 0.5789;
    0.1620 0.2565 0.75 0 0 1 0.4737]';
t_test=[0.1875 0.4062 0.4375 0.5938 0.6250 0.7187 0.3750];
threshold=[0 1;0 1;0 1;0 1;0 1;0 1;0 1];
a=[10 15 20];
for i=1:3
    net=newff(threshold,[a(i),1],{'tansig','logsig'},'traingdx');
    net.trainparam.epochs=1000;
    net.trainparam.goal=0.001;
    net=init(net);
    net=train(net,p,t);
    y(i,:)=sim(net,p_test);
end
mean(y)
figure;
plot(1:7,y(1,:)-t_test);
hold on;
plot(1:7,y(2,:)-t_test,'+');
hold on;
plot(1:7,y(3,:)-t_test,'--');
xlabel('输入样本');ylabel('误差曲线');
hold off